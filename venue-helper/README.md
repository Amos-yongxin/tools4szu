# 深大体育场馆自动预约小助手

**自动预约流程比较复杂, 请务必仔细看完README后再进行操作**

## 运行流程

1. 运行前请在`settings.py`脚本中, 配置相关参数
    - cookies: 可以从浏览器F12中获取, 直接复制粘贴字符串格式到此处即可, 会自动进行解析成字典
    - stuid: 你的学号
    - stuname: 你的姓名
    - courses: 需要自动化预约的场地的列表, 详细格式请见文末
    - delay: 每次自动化预约的间隔, 单位是毫秒, 不建议设置过小
    - counts: 每次预约的次数, 默认是5次
2. 执行流程
    - 在`settings.py`中配置好`cookies`, 并运行`download.py`下载相关参数
    - 在`settings.py`中配置好所有其他信息, 包括需要自动化预约的记录
    - 运行`main.py`脚本, 进行自动化预约
    - 登录ehall中“体育场馆预约”中“我的预约”进行查看并缴费
3. 去体育场快乐的玩耍~
---

## Course的结构 (所有字段均为字符串格式!!)

| 字段名    | 说明                                                  |
|--------|-----------------------------------------------------|
| CGDM   | 场馆代码, 通过运行`download.py`下载的`venues.xlsx`获得           |
| CDWID  | 场地ID, 通过运行`download.py`获得的`RoomList.xlsx`的`CDWID`字段 |
| XMDM   | 项目代码, 通过运行`download.py`下载的`activities.xlsx`获得       |
| XQWID  | 校区ID (1:粤海, 2:丽湖)                                   |
| KYYSJD | 预约的开始时间, 形如`20:00-21:00`, 必须是合法的                    |
| YYRQ   | 预约日期 例如 `2025-01-01`                                |
| YYLX   | 预约类型 即订场方式(`1.0`: 包场, `2.0`: 散场 )                   |

下面为一个合法的course例子, settings中的courses以数组格式存储多个预约记录, 会按照设置的顺序依次进行预约.
```json
{
  "CGDM": "001",
  "CDWID": "6fbd613382ef48db9d2a2d214e47bae3",
  "XMDM": "001",
  "XQWID": "1",
  "KYYSJD": "20:00-21:00",
  "YYRQ": "2025-04-29",
  "YYLX": "1.0"
}
```

## 其他注意事项:

- 可以通过Web页面获取一些参数, 也可以通过运行`download.py`脚本获取,
- 场地和场馆不同, 场馆下包含若干个场地. 可以把场馆理解成羽毛球馆, 场地理解成1号羽毛球场, 2号羽毛球场...
- 场地ID是一串长十六进制字符串
- 运行过程中会在当前目录下生成`venue.log`文件, 记录每次预约的结果, 以及一些其他信息

